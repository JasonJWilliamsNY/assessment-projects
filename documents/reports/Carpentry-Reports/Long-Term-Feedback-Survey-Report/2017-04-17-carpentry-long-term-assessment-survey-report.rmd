# Analysis of Carpentry Long-Term Feedback Survey
__Author__: [Kari L. Jordan](https://github.com/kariljordan)
__Published__: April 2017

THIS IS JUST A DRAFT

A [PDF](https://github.com/carpentries/public-survey-info/blob/master/documents/surveys/2017-04-17-carpentry-long-term-feedback-survey.pdf) of the survey questions, the data used in this analysis, and full R code are located on the [public-survey-info](https://github.com/carpentries/public-survey-info) repo on GitHub. Feel free to use the data and [tell us](mailto: kariljordan@carpentries.org) about your findings.

```{r}
# install.packages("ggmap", type = "source")
# install.packages("likert")
# install.packages("purrr")
# install.packages("mapproj")
# install.packages("ggmap")
# install.packages("ggplot2")
library(ggmap)
library(likert)
library(purrr)
library(mapproj)
library(ggplot2)
update.packages(repos = "https://cloud.r-project.org")
```
```{r echo=FALSE, purl=TRUE}
download.file("https://raw.githubusercontent.com/carpentries/public-survey-info/master/data/public_data/2017-04-17-carpentry-long-term-assessment-survey-data-public.csv", "2017-04-17-carpentry-long-term-assessment-survey-data-public.csv")

data <- read.csv("2017-04-17-carpentry-long-term-assessment-survey-data-public.csv", na.strings = "")
```
### Learner Demographics

```{r echo=FALSE}
table(data$Country)
```
```{r echo=FALSE}
data_country_tally <- 
  data %>% 
  group_by(Country) %>% 
  tally() %>% 
  filter(!is.na(Country)) %>% 
  arrange(desc(n))
# How do I change the color of just the South Africa bar?
ggplot(data_country_tally, 
       aes(reorder(Country, n),
           n)) +
  geom_col() +
  xlab("") +
  ylab("") +
  coord_flip() +
  ggtitle("")
  theme_bw(base_size = 14)
```
A large portion of Carpentry learners responding to the survey attended a workshop in the United States.
```{r echo=FALSE}
table(data$Position)
```
```{r echo=FALSE}
table(data$Country)
```
```{r echo=FALSE}
data_position_tally <- 
  data %>% 
  group_by(Position) %>% 
  tally() %>% 
  filter(!is.na(Position)) %>% 
  arrange(desc(n))

ggplot(data_position_tally, 
       aes(reorder(Position, n),
           n)) +
  geom_col() +
  xlab("") +
  ylab("") +
  ggtitle("Self-Reported Status of Carpentry Learners")
  theme_bw(base_size = 14)
# There is one data point in the CSV with the word "response" that needs to be
# removed.
```
Majority graduate students.
```{r echo=FALSE}
table(data$Position.Other)
```
```{r echo=FALSE}
table(data$How.Many.Workshops)
```
```{r echo=FALSE}
table(data$Behaviors.Adopted)
```
```{r echo=FALSE}
table(data$Column25)
```
```{r echo=FALSE}
table(data$Column26)
```
```{r echo=FALSE}
table(data$Column27)
```
```{r echo=FALSE}
table(data$Column28)
```
```{r echo=FALSE}
table(data$Column29)
```
```{r echo=FALSE}
table(data$Column30)
```
```{r echo=FALSE}
table(data$Column31)
```
```{r echo=FALSE}
table(data$Column32)
```
```{r echo=FALSE}
table(data$Programming.Usage.Before.Workshop)
```
```{r echo=FALSE}
table(data$Programming.Usage.Since.Workshop)
```
```{r echo=FALSE}
table(data$Change.In.Confidence)
```
```{r echo=FALSE}
table(data$How.Tools.Learned.Help)
```
```{r echo=FALSE}
table(data$Column34)
```
```{r echo=FALSE}
table(data$Column34)
```
```{r echo=FALSE}
table(data$Column35)
```
```{r echo=FALSE}
table(data$Column36)
```
```{r echo=FALSE}
table(data$Column37)
```
```{r echo=FALSE}
table(data$Contributed.To.Writing)
```

```{r echo=FALSE}
table(data$Carpentry.Involvement)
```
```{r echo=FALSE}
table(data$Column45)
```
```{r echo=FALSE}
table(data$Column46)
```
```{r echo=FALSE}
table(data$Column47)
```
```{r echo=FALSE}
table(data$Column48)
```
```{r echo=FALSE}
table(data$Column49)
```
```{r echo=FALSE}
table(data$Column50)
```
```{r echo=FALSE}
table(data$Column51)
```

```{r echo=FALSE}
table(data$Recommended)
```
### Likert Items

Using the [Likert](http://jason.bryer.org/likert/) package, the following chart is an analysis of learner responses to the statements above. The code chunk is shown once here, and hidden for all subsequent plots.

```{r}
cols_with_Agree <- map_lgl(data, ~`%in%`("Agree", .x))
data_agree <-  data[ , cols_with_Agree]

data_agree <- map_if(data_agree, 
                     is.character, 
                     as.factor)
for(i in seq_along(data_agree)) {
                data_agree[[i]] <- factor(data_agree[[i]], levels=order)
}
title <- "Learner Perception of Carpentry Workshops"
data_agree_likert <-  likert(as.data.frame(data_agree))
theme_update(plot.title = element_text(hjust = 0.5))

plot(data_agree_likert) + ggtitle(title)

```

```{r}
# In what country did you attend a Carpentry workshop? 
#map <- get_map(location = 'Europe', zoom = 4)
#ggmap(map)
```